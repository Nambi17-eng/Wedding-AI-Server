<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Photos</title>
    <style>
        body { font-family: 'Georgia', serif; background: #fafafa; text-align: center; padding: 20px; color: #333; }
        .logo { font-size: 24px; color: #d4af37; font-weight: bold; margin-bottom: 10px; }
        .btn-group { display: flex; flex-direction: column; gap: 15px; margin: 30px auto; max-width: 400px; }
        
        .btn { padding: 15px; border-radius: 50px; font-size: 18px; font-weight: bold; border: none; cursor: pointer; display: block; width: 100%; text-decoration: none; }
        .gold { background: linear-gradient(45deg, #d4af37, #f3e5ab); color: white; }
        .dark { background: white; border: 2px solid #eee; color: #555; }
        
        .gallery { display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 30px; }
        .card { background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
        .card img { width: 100%; height: 150px; object-fit: cover; }
        .dl-btn { display: block; background: #333; color: white; padding: 10px; text-decoration: none; font-size: 14px; }
        
        input[type="file"] { display: none; }
        #loading { display: none; color: #d4af37; font-weight: bold; margin-top: 20px; }
    </style>
</head>
<body>

    <div class="logo">üíç Wedding Moments</div>
    <p>Find your photos instantly.</p>

    <form id="uform" method="POST" enctype="multipart/form-data">
        <div class="btn-group">
            <label class="btn gold">üì∏ Take Selfie
                <input type="file" name="file" accept="image/*" capture="user" onchange="sub(this)">
            </label>
            <label class="btn dark">üñºÔ∏è Upload from Gallery
                <input type="file" name="file" accept="image/*" onchange="sub(this)">
            </label>
        </div>
    </form>
    
    <div id="loading">üîç Scanning faces...</div>

    {% if searched %}
        {% if photos %}
            <h3 style="color:green">Found {{ photos|length }} Photos!</h3>
            <div class="gallery">
                {% for p in photos %}
                <div class="card">
                    <img src="/photos/{{ p }}">
                    <a href="/photos/{{ p }}" download class="dl-btn">‚¨á Download HD</a>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div style="background:#fff3cd; padding:20px; border-radius:10px; margin-top:20px;">
                üòï No photos found yet.<br><small>Try again in 15 minutes.</small>
            </div>
        {% endif %}
    {% endif %}

    <script>
        function sub(el) {
            document.getElementById('loading').style.display = 'block';
            document.getElementById('uform').submit();
        }
    </script>
</body>
</html>